<div class="search-container">
  <div class="search-header">
    <h1 class="search-title">Search Users</h1>
    <p class="search-subtitle">Find and connect with other users</p>
  </div>

  <div class="search-input-container">
    <div class="search-input-wrapper">
      <i class="search-icon fas fa-search"></i>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search by username, email, or name..."
        [(ngModel)]="searchQuery"
        (input)="onSearchInput()"
        #searchInput>
      <button 
        *ngIf="searchQuery" 
        class="clear-btn" 
        (click)="clearSearch()"
        type="button">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <div class="search-results" *ngIf="searchQuery">
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p class="loading-text">Searching users...</p>
    </div>

    <div *ngIf="!isLoading && searchResults.length > 0" class="results-container">
      <div class="results-header">
        <span class="results-count">{{searchResults.length}} user(s) found</span>
      </div>
      
      <div class="user-list">
        <div 
          *ngFor="let user of searchResults" 
          class="user-card"
          (click)="viewUserProfile(user)">
          <div class="user-avatar">
            <img 
              [src]="getUserAvatarUrl(user)" 
              [alt]="user.username + ' avatar'"
              class="avatar-img"
              (error)="onImageError($event)">
          </div>
          
          <div class="user-info">
            <h3 class="user-name">{{ '@' + user.username }}</h3>
            <p class="user-bio" *ngIf="user.bio">{{user.bio}}</p>
            <p class="user-joined">Joined {{user.createdAt | date:'MMM yyyy'}}</p>
          </div>
          
          <div class="user-actions">
            <button class="view-profile-btn" (click)="viewUserProfile(user); $event.stopPropagation()">
              <i class="fas fa-eye"></i>
              View Profile
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading && searchQuery && searchResults.length === 0" class="no-results">
      <div class="no-results-icon">
        <i class="fas fa-user-slash"></i>
      </div>
      <h3 class="no-results-title">No users found</h3>
      <p class="no-results-text">Try adjusting your search terms or check the spelling.</p>
    </div>

    <div *ngIf="errorMessage" class="error-container">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 class="error-title">Search Error</h3>
      <p class="error-text">{{errorMessage}}</p>
      <button class="retry-btn" (click)="performSearch()">
        <i class="fas fa-redo"></i>
        Try Again
      </button>
    </div>
  </div>

  <div *ngIf="!searchQuery" class="initial-state">
    <div class="initial-icon">
      <i class="fas fa-users"></i>
    </div>
    <h3 class="initial-title">Start searching for users</h3>
    <p class="initial-text">Enter a username, email, or name to find other users on the platform.</p>
  </div>
</div>
